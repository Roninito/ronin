<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Appendix B: Configuration Reference - Ronin & Realm Documentation</title>
  <link rel="stylesheet" href="../../styles/book.css">
</head>
<body>
  <div class="chapter-header">
    <div class="chapter-number">Appendix B</div>
    <h1 class="chapter-title">Configuration Reference</h1>
  </div>

  <div class="content">
    <h2>Environment Variables</h2>

    <h3>AI Configuration</h3>
    <table>
      <thead>
        <tr>
          <th>Variable</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>OLLAMA_URL</code></td>
          <td>Ollama API URL</td>
          <td><code>http://localhost:11434</code></td>
        </tr>
        <tr>
          <td><code>OLLAMA_MODEL</code></td>
          <td>Ollama model name</td>
          <td><code>qwen3:1.7b</code></td>
        </tr>
        <tr>
          <td><code>GROK_API_KEY</code></td>
          <td>Grok API key</td>
          <td>-</td>
        </tr>
        <tr>
          <td><code>GEMINI_API_KEY</code></td>
          <td>Gemini API key</td>
          <td>-</td>
        </tr>
        <tr>
          <td><code>BRAVE_API_KEY</code></td>
          <td>Brave Search API key (for MCP web search)</td>
          <td>-</td>
        </tr>
      </tbody>
    </table>

    <h3>Server Configuration</h3>
    <table>
      <thead>
        <tr>
          <th>Variable</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>WEBHOOK_PORT</code></td>
          <td>Webhook server port</td>
          <td><code>3000</code></td>
        </tr>
        <tr>
          <td><code>PORT</code></td>
          <td>General server port</td>
          <td><code>3000</code></td>
        </tr>
        <tr>
          <td><code>DESKTOP_BRIDGE_PORT</code></td>
          <td>Desktop Mode bridge port</td>
          <td><code>17341</code></td>
        </tr>
      </tbody>
    </table>

    <h3>Directory Configuration</h3>
    <table>
      <thead>
        <tr>
          <th>Variable</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>RONIN_EXTERNAL_AGENT_DIR</code></td>
          <td>External agent directory</td>
          <td><code>~/.ronin/agents</code></td>
        </tr>
        <tr>
          <td><code>RONIN_USER_PLUGIN_DIR</code></td>
          <td>User plugins directory</td>
          <td><code>~/.ronin/plugins</code></td>
        </tr>
        <tr>
          <td><code>FISHY_DATA_DIR</code></td>
          <td>Fishy data directory</td>
          <td><code>~/.ronin/data</code></td>
        </tr>
        <tr>
          <td><code>FISHY_DB_PATH</code></td>
          <td>Fishing database path</td>
          <td><code>~/.ronin/data/fishing.db</code></td>
        </tr>
      </tbody>
    </table>

    <h3>Plugin-Specific Variables</h3>
    <table>
      <thead>
        <tr>
          <th>Variable</th>
          <th>Description</th>
          <th>Plugin</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>TELEGRAM_BOT_TOKEN</code></td>
          <td>Telegram Bot API token</td>
          <td>telegram</td>
        </tr>
        <tr>
          <td><code>DISCORD_BOT_TOKEN</code></td>
          <td>Discord Bot token</td>
          <td>discord</td>
        </tr>
        <tr>
          <td><code>GITHUB_TOKEN</code></td>
          <td>GitHub Personal Access Token</td>
          <td>git (MCP)</td>
        </tr>
      </tbody>
    </table>

    <h2>Config File Format</h2>

    <p>
      Configuration is stored in <code>~/.ronin/config.json</code>:
    </p>

    <pre><code>{
  "agentDir": "./agents",
  "externalAgentDir": "~/.ronin/agents",
  "userPluginDir": "~/.ronin/plugins",
  "ai": {
    "ollamaUrl": "http://localhost:11434",
    "ollamaModel": "qwen3:1.7b",
    "ollamaTimeoutMs": 120000,
    "defaultProvider": "ollama",
    "fallback": {
      "enabled": true,
      "order": ["ollama", "gemini", "grok"]
    }
  },
  "gemini": {
    "apiKey": "AIxxxxx",
    "model": "gemini-1.5-pro"
  },
  "grok": {
    "apiKey": "sk-xxxxx"
  },
  "braveSearch": {
    "apiKey": "BSA-xxxxx"
  },
  "telegram": {
    "enabled": false,
    "botToken": "",
    "allowedUsers": [],
    "webhookUrl": ""
  },
  "discord": {
    "enabled": false,
    "botToken": "",
    "allowedGuilds": [],
    "allowedUsers": []
  },
  "realm": {
    "enabled": false,
    "url": "wss://realm.afiwi.net",
    "callsign": "",
    "token": "",
    "localPort": 4000
  },
  "tools": {
    "enabled": true,
    "allowCloud": true,
    "costLimit": {
      "daily": 5.0,
      "monthly": 50.0
    },
    "policy": {
      "defaultAction": "allow",
      "rules": []
    }
  },
  "mcp": {
    "enabled": true,
    "servers": {
      "filesystem": {
        "command": "npx",
        "args": ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"],
        "enabled": true
      },
      "brave-search": {
        "command": "npx",
        "args": ["-y", "@modelcontextprotocol/server-brave-search"],
        "enabled": true
      }
    }
  },
  "desktop": {
    "enabled": false,
    "features": {
      "notifications": true,
      "clipboard": false,
      "shortcuts": true,
      "fileWatching": true
    },
    "folders": ["~/Desktop", "~/Downloads"],
    "bridge": {
      "port": 17341,
      "host": "localhost"
    },
    "menubar": true
  }
}</code></pre>

    <h2>AI Configuration</h2>

    <h3>ai</h3>
    <table>
      <thead>
        <tr>
          <th>Option</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>ai.ollamaUrl</code></td>
          <td>Ollama server URL</td>
          <td><code>"http://localhost:11434"</code></td>
        </tr>
        <tr>
          <td><code>ai.ollamaModel</code></td>
          <td>Default Ollama model</td>
          <td><code>"qwen3:1.7b"</code></td>
        </tr>
        <tr>
          <td><code>ai.ollamaTimeoutMs</code></td>
          <td>Request timeout in milliseconds</td>
          <td><code>120000</code></td>
        </tr>
        <tr>
          <td><code>ai.defaultProvider</code></td>
          <td>Default AI provider</td>
          <td><code>"ollama"</code></td>
        </tr>
        <tr>
          <td><code>ai.fallback.enabled</code></td>
          <td>Enable fallback to other providers</td>
          <td><code>true</code></td>
        </tr>
        <tr>
          <td><code>ai.fallback.order</code></td>
          <td>Fallback provider order</td>
          <td><code>["ollama", "gemini", "grok"]</code></td>
        </tr>
      </tbody>
    </table>

    <h3>gemini</h3>
    <table>
      <thead>
        <tr>
          <th>Option</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>gemini.apiKey</code></td>
          <td>Google Gemini API key</td>
          <td><code>""</code></td>
        </tr>
        <tr>
          <td><code>gemini.model</code></td>
          <td>Gemini model name</td>
          <td><code>"gemini-1.5-pro"</code></td>
        </tr>
      </tbody>
    </table>

    <h3>grok</h3>
    <table>
      <thead>
        <tr>
          <th>Option</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>grok.apiKey</code></td>
          <td>xAI Grok API key</td>
          <td><code>""</code></td>
        </tr>
      </tbody>
    </table>

    <h2>Realm Configuration</h2>

    <table>
      <thead>
        <tr>
          <th>Option</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>realm.enabled</code></td>
          <td>Enable Realm P2P communication</td>
          <td><code>false</code></td>
        </tr>
        <tr>
          <td><code>realm.url</code></td>
          <td>Realm discovery server URL</td>
          <td><code>""</code></td>
        </tr>
        <tr>
          <td><code>realm.callsign</code></td>
          <td>Your unique call sign</td>
          <td><code>""</code></td>
        </tr>
        <tr>
          <td><code>realm.token</code></td>
          <td>Authentication token (optional)</td>
          <td><code>""</code></td>
        </tr>
        <tr>
          <td><code>realm.localPort</code></td>
          <td>Local WebSocket port</td>
          <td><code>4000</code></td>
        </tr>
      </tbody>
    </table>

    <div class="note">
      <strong>Note:</strong> When Realm is enabled, Ronin automatically connects on startup.
    </div>

    <h2>Tools Configuration (Hybrid Intelligence)</h2>

    <table>
      <thead>
        <tr>
          <th>Option</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>tools.enabled</code></td>
          <td>Enable tool system</td>
          <td><code>true</code></td>
        </tr>
        <tr>
          <td><code>tools.allowCloud</code></td>
          <td>Allow cloud AI providers for tools</td>
          <td><code>true</code></td>
        </tr>
        <tr>
          <td><code>tools.costLimit.daily</code></td>
          <td>Daily cost limit (USD)</td>
          <td><code>5.0</code></td>
        </tr>
        <tr>
          <td><code>tools.costLimit.monthly</code></td>
          <td>Monthly cost limit (USD)</td>
          <td><code>50.0</code></td>
        </tr>
        <tr>
          <td><code>tools.policy.defaultAction</code></td>
          <td>Default policy action</td>
          <td><code>"allow"</code></td>
        </tr>
      </tbody>
    </table>

    <h2>Desktop Mode Configuration</h2>

    <table>
      <thead>
        <tr>
          <th>Option</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>desktop.enabled</code></td>
          <td>Master switch for Desktop Mode</td>
          <td><code>false</code></td>
        </tr>
        <tr>
          <td><code>desktop.features.notifications</code></td>
          <td>Enable native notifications</td>
          <td><code>true</code></td>
        </tr>
        <tr>
          <td><code>desktop.features.clipboard</code></td>
          <td>Enable clipboard watching</td>
          <td><code>false</code></td>
        </tr>
        <tr>
          <td><code>desktop.features.shortcuts</code></td>
          <td>Enable keyboard shortcuts</td>
          <td><code>true</code></td>
        </tr>
        <tr>
          <td><code>desktop.features.fileWatching</code></td>
          <td>Watch configured folders</td>
          <td><code>true</code></td>
        </tr>
        <tr>
          <td><code>desktop.folders</code></td>
          <td>Array of folders to watch</td>
          <td><code>["~/Desktop", "~/Downloads"]</code></td>
        </tr>
        <tr>
          <td><code>desktop.bridge.port</code></td>
          <td>HTTP port for OS communications</td>
          <td><code>17341</code></td>
        </tr>
        <tr>
          <td><code>desktop.bridge.host</code></td>
          <td>HTTP host for bridge</td>
          <td><code>"localhost"</code></td>
        </tr>
        <tr>
          <td><code>desktop.menubar</code></td>
          <td>Show menubar status indicator</td>
          <td><code>true</code></td>
        </tr>
      </tbody>
    </table>

    <h2>Telegram Configuration</h2>

    <table>
      <thead>
        <tr>
          <th>Option</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>telegram.enabled</code></td>
          <td>Enable Telegram bot integration</td>
          <td><code>false</code></td>
        </tr>
        <tr>
          <td><code>telegram.botToken</code></td>
          <td>Bot API token from @BotFather</td>
          <td><code>""</code></td>
        </tr>
        <tr>
          <td><code>telegram.allowedUsers</code></td>
          <td>Array of allowed user IDs</td>
          <td><code>[]</code></td>
        </tr>
        <tr>
          <td><code>telegram.webhookUrl</code></td>
          <td>Webhook URL (optional, uses polling if empty)</td>
          <td><code>""</code></td>
        </tr>
      </tbody>
    </table>

    <h2>Discord Configuration</h2>

    <table>
      <thead>
        <tr>
          <th>Option</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>discord.enabled</code></td>
          <td>Enable Discord bot integration</td>
          <td><code>false</code></td>
        </tr>
        <tr>
          <td><code>discord.botToken</code></td>
          <td>Discord bot token</td>
          <td><code>""</code></td>
        </tr>
        <tr>
          <td><code>discord.allowedGuilds</code></td>
          <td>Array of allowed server IDs</td>
          <td><code>[]</code></td>
        </tr>
        <tr>
          <td><code>discord.allowedUsers</code></td>
          <td>Array of allowed user IDs</td>
          <td><code>[]</code></td>
        </tr>
      </tbody>
    </table>

    <h2>MCP Configuration</h2>

    <h3>braveSearch</h3>

    <p>Configuration for Brave Search API key:</p>

    <pre><code>"braveSearch": {
  "apiKey": "BSA-xxxxxxxxxxxx"
}</code></pre>

    <table>
      <thead>
        <tr>
          <th>Option</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>braveSearch.apiKey</code></td>
          <td>Brave Search API key for MCP web search</td>
          <td><code>""</code></td>
        </tr>
      </tbody>
    </table>

    <div class="callout">
      <div class="callout-title">ℹ️ Note</div>
      <p>
        Get your API key from <a href="https://brave.com/search/api" target="_blank">brave.com/search/api</a>. Environment variable <code>BRAVE_API_KEY</code> takes precedence.
      </p>
    </div>

    <h3>mcp</h3>

    <p>MCP (Model Context Protocol) server configurations:</p>

    <pre><code>"mcp": {
  "servers": {
    "filesystem": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"],
      "enabled": true
    },
    "brave-search": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-brave-search"],
      "env": {
        "BRAVE_API_KEY": "BSA-xxxxx"
      },
      "enabled": true
    },
    "github": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-github"],
      "env": {
        "GITHUB_TOKEN": "ghp_xxxxx"
      },
      "enabled": false
    },
    "sqlite": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-sqlite", "/path/to/db.sqlite"],
      "enabled": false
    }
  }
}</code></pre>

    <h4>Server Configuration Schema</h4>

    <table>
      <thead>
        <tr>
          <th>Field</th>
          <th>Type</th>
          <th>Description</th>
          <th>Required</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>command</code></td>
          <td>string</td>
          <td>Executable to run (typically <code>npx</code>)</td>
          <td>Yes</td>
        </tr>
        <tr>
          <td><code>args</code></td>
          <td>array</td>
          <td>Command-line arguments</td>
          <td>Yes</td>
        </tr>
        <tr>
          <td><code>env</code></td>
          <td>object</td>
          <td>Environment variables for the server process</td>
          <td>No</td>
        </tr>
        <tr>
          <td><code>enabled</code></td>
          <td>boolean</td>
          <td>Whether to connect to this server at startup</td>
          <td>Yes</td>
        </tr>
      </tbody>
    </table>

    <h4>Managing MCP Servers</h4>

    <p>Use CLI commands to manage MCP servers:</p>

    <pre><code># Add servers
ronin mcp add filesystem --path ~/Documents
ronin mcp add brave-search
ronin mcp add github
ronin mcp add sqlite --path ./myapp.db

# List, enable, disable
ronin mcp list
ronin mcp enable github
ronin mcp disable filesystem
ronin mcp remove sqlite</code></pre>

    <div class="callout">
      <div class="callout-title">ℹ️ Note</div>
      <p>
        MCP tools are registered with the <code>mcp_&lt;server&gt;_&lt;tool&gt;</code> naming convention. See <a href="../../MCP.md">MCP.md</a> for complete documentation.
      </p>
    </div>

    <h2>CLI Options</h2>

    <p>
      See Chapter 4 (CLI Reference) for complete CLI options documentation.
    </p>

    <h2>Default Values</h2>

    <p>
      All configuration options have sensible defaults. See the environment variables table above for default values.
    </p>

    <div class="navigation">
      <a href="A-api-reference.html" class="prev">← Appendix A: API Reference</a>
      <a href="C-examples.html" class="next">Appendix C: Example Agents →</a>
    </div>
  </div>
</body>
</html>
